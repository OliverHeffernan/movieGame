(function(){"use strict";var e={1774:function(e,t,n){var r=n(5130),o=(n(4114),n(6768)),i=n(4232),a=n(144);const s={class:"vertContainer"},u={class:"vert"},c=["src"],l=["src"],v={id:"hintsContainer",class:"hintsContainer"},f={id:"hints",class:"hints"};var d={__name:"MovieContainer",props:["index","movie","credits"],setup(e){const t=e;let n=w(t.credits),d=(0,a.KR)(0),h=!1,p=(0,a.KR)(!0);const g=(0,a.KR)(""),m=(0,a.KR)([]);function w(e){let t="";for(let n=0;n<e.crew.length;n++)if("Director"==e.crew[n].job||"Directing"==e.crew[n].known_for_department){t=e.crew[n].name;break}return t}function k(){p.value=!1}function y(){p.value=!0}function b(e){let t=String(e).replace(/[^\w\s]/g,"").toLowerCase();return t}function R(){const e=g.value;g.value="",d.value>=6||h||(d.value++,b(e)==b(t.movie.title)||e.toLowerCase()==t.movie.title.toLowerCase()?(O(e+" is correct!!"),h=!0):E(d.value,e))}function _(e){return"https://image.tmdb.org/t/p/w600_and_h900_bestv2/"+e.poster_path}function C(e){return 1==e?"It has actor "+t.credits.cast[2].name+" in it.":2==e?"The movie was released on "+t.movie.release_date:3==e?"The director is "+n:4==e?"It also has actor "+t.credits.cast[1].name+" in it.":5==e?"It also has the actor "+t.credits.cast[0].name+" in it.":void 0}function E(e,n){6==e?O("‚ùå "+n+". The answer is "+t.movie.title):e<6&&O("‚ùå "+n+".üí° "+C(e))}function O(e){m.value.push(e)}return(n,w)=>((0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",u,[(0,o.Lk)("img",{src:_(e.movie),name:"moviePosterBlurredBg",class:"moviePosterBlurredBg",alt:""},null,8,c),(0,o.Lk)("div",{id:"imgContainer",onMousedown:w[0]||(w[0]=e=>k()),onMouseup:w[1]||(w[1]=e=>y())},[(0,o.Lk)("img",{src:_(t.movie),name:"moviePoster",id:"moviePoster",class:(0,i.C4)((0,a.R1)(h)?"":"guess"+(0,a.R1)(d)),alt:""},null,10,l)],32),(0,o.Lk)("div",{id:"guessBox",class:(0,i.C4)((0,a.R1)(p)?"open":"closed")},[(0,o.Lk)("button",{id:"guessButton",onClick:R},(0,i.v_)(""==g.value?"Skip for hint":"Guess")+" ("+(0,i.v_)((0,a.R1)(d))+"/6)",1),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":w[2]||(w[2]=e=>g.value=e),name:"guessInput",placeholder:"Guess the movie",type:"text",id:"guessInput",onKeyup:w[3]||(w[3]=(0,r.jR)((e=>R()),["enter"]))},null,544),[[r.Jo,g.value]]),(0,o.Lk)("div",v,[(0,o.Lk)("div",f,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.value,((e,t)=>((0,o.uX)(),(0,o.CE)("p",{key:t},(0,i.v_)(e),1)))),128))])])],2)])]))}};const h=d;var p=h;const g={key:0};var m={__name:"App",setup(e){let t=[];const n=(0,a.KR)([]);let r=0,i=!1;async function s(){if(0==t.length){const e=await v();t=e.results}let e=l(0,t.length-1),r=t[e];if(t.splice(e,1),0==t.length){const e=await v();t=e.results}while(null==r||0==r.success||r.adult||null==r.poster_path||"en"!=r.original_language||r.vote_count<1500||parseInt(r.release_date.split("-")[0])<1965)if(e=l(0,t.length),r=t[e],t.splice(e,1),0==t.length){const e=await v();t=e.results}let o=await f(r.id);while("ERROR"==o)o=await f(r.id);n.value.push({movie:r,credits:o})}async function u(){console.log("scrolling",r),0!=r||i||(await s(),r++,setTimeout((()=>{r--}),2e3))}async function c(){console.log("fetching"),i=!0;try{const e=new AbortController,t=5e3,n=setTimeout((()=>e.abort()),t),r=await fetch("https://settling-donkey-brightly.ngrok-free.app/movie",{method:"GET",signal:e.signal,headers:{"ngrok-skip-browser-warning":"true"}});if(clearTimeout(n),!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const o=await r.text();return i=!1,JSON.parse(o.substring(8))}catch(e){return console.error("Error fetching result:",e),i=!1,"ERROR"}}function l(e,t){const n=Math.ceil(Math.min(e,t)),r=Math.floor(Math.max(e,t));return Math.floor(Math.random()*(r-n+1))+n}async function v(){let e=await c();while("ERROR"===e||!e||"object"!==typeof e||!Array.isArray(e.results))console.warn("getPage: retrying due to invalid data",e),e=await c();return e}async function f(e){try{const t=await fetch("https://settling-donkey-brightly.ngrok-free.app/credits/"+e,{method:"GET",headers:{"ngrok-skip-browser-warning":"true"}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const n=await t.text();return JSON.parse(n.substring(8))}catch(t){return"ERROR"}}return(0,o.sV)((async()=>{for(let e=0;e<10;e++)await s()})),(e,t)=>((0,o.uX)(),(0,o.CE)("div",{id:"phoneContainer",onScroll:u},[0==n.value.length?((0,o.uX)(),(0,o.CE)("div",g,"Loading")):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(n.value,((e,t)=>((0,o.uX)(),(0,o.Wv)(p,{key:t,index:t-1,movie:e.movie,credits:e.credits},null,8,["index","movie","credits"])))),128))],32))}};const w=m;var k=w;(0,r.Ef)(k).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var a=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],i=e[l][2];for(var s=!0,u=0;u<r.length;u++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)var l=u(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self["webpackChunkmovie_game"]=self["webpackChunkmovie_game"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(1774)}));r=n.O(r)})();
//# sourceMappingURL=app.e580019b.js.map